@page "/editprofile"
@inject UserRegistrationService userRegistrationService
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<EditForm Model="@userToChange" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <div class="container">
        <h2>Edit @userToChange?.Name's Profile</h2>
        <div class="form-group">
            <label for="email">Email:</label>
            <InputText id="email" class="form-control" @bind-Value="userToChange.Email" />
        </div>
        <div class="form-group">
            <label for="username">Username:</label>
            <InputText id="username" class="form-control" @bind-Value="userToChange.Name" />
        </div>
        <div class="form-group">
            <label for="phoneNumber">Phone number:</label>
            <InputText id="phoneNumber" class="form-control" @bind-Value="userToChange.PhoneNumber" />
        </div>
        <button type="submit" class="btn btn-primary">Save Changes</button>
    </div>
</EditForm>

@code {
    UserModel? userToChange;

    protected override void OnInitialized()
    {
        userToChange = userRegistrationService.CurrentUser ?? new UserModel();
    }

    private void HandleValidSubmit()
    {
        userRegistrationService.ChangeUserData(userToChange!);
        NavigationManager.NavigateTo("/profile");
        // Handle the form submission here. For example, you might call a method on the userRegistrationService to save the changes.
    }
}